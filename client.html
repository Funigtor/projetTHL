<!Doctype html>

<head>
	<title>Bonswag !</title>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/jquery.min.js"></script>
</head>

<body>
	<div id="hello">Todo change me</div>
	<form>
		<input id="fonction" value="Fonction">
		<br />
		<input id="debut" value="Debut">
		<input id="fin" value="Fin">
		<!--<input id="pas" value="Pas">-->
		<button id="clickMe">Clique salope</button>
	</form>
	<canvas id="graph" width="1000" height="500"></canvas>
	<script>
		// Gestion du formulaire
		$('#clickMe').click(function (event) {
			event.preventDefault();
			var sent = new Object;
			sent.fonction = $('#fonction').val();
			sent.debut = $('#debut').val();
			sent.fin = $('#fin').val();
			//sent.pas = $('#pas').val();
			socket.emit('sandwich', JSON.stringify(sent));
		});
		// Gestion du r√©seau
		var socket = io.connect(document.location.href);
		socket.on("tab", function (data) {
			tab = JSON.parse(data);
			console.log(tab);
			document.getElementById("hello").innerHTML = tab.points;
			// On dessine une courbe
			canvas = document.getElementById('graph');
			if (canvas.getContext) {
				var ctx = canvas.getContext('2d');
				ctx.fillStyle = "white";
				ctx.fillRect(0, 0, document.getElementById("graph").getAttribute('width'), document.getElementById("graph").getAttribute('height'));
				ctx.fillStyle = 'rgb(200, 0, 0)';
				for (i = 0; i < 1000; i++) {
					ctx.fillRect(i, tab.points[i], 1, 1)
				}
			}
		})
	</script>
</body>

</html>